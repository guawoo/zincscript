<?xml version="1.0" encoding="UTF-8"?>

<!-- script标签用于定义与此xml相关联的zincscript脚本 -->
<!-- 脚本可以放在2个位置：-->
<!-- 1 sandbox中：zincscript可以保存在程序内部，(对于symbian系统，可以定义在程序外部文件系统中)，
    使用属性"path"定义脚本文件的位置，属性"name"定义脚本的名字。使用方法如下： 
    注意：当没有"path"属性时，先从RMS中搜索脚本，再在资源中搜索，因为资源中的脚本可能以及过期了，
    更新的脚本在RMS中。-->
<script path="path of the zinc script" name="name of the zincscript"/>
<!-- 2 xml代码中：脚本也可以随着xml文件一起下发，只需要把zincscript代码写在script标签之间就OK
    注意：随xml一起下发的zincscript代码不会被存储，一旦离开了此功能单元，这段脚本代码随即失效-->
<script>
    def login()
        string aid=getName("name")
        string vid=getValue("name")
        string apsw=getName("psw")
        string vpsw=getValue("psw")
    
        int savepsw=getValue("remember")
        int autologin=getValue("auto") 
        if savepsw==1
            insert2RMS("account",0,vid,0);
            insert2RMS("account",0,apsw,0)
        end
    
        set2RMS("login",savepsw)
        set2RMS("login",autologin)
    
        string url="http://3g.cn/login?"+aid+"="+vid+"&amp;"+apsw+"="+vpsw
        send(url)
    end
    
    def fetchpsw()
        switch("fetchpsw.xml")
    end
    
    def autologin()
        string name=get4RMS("account",0);
        string psw=get4RMS("account",0);
        int rem=get4RMS("login",0)
        int autologin=getValue("auto") 
        setValue("name",name)
        setValue("psw",psw)
        setValue("remember",rem)
        setValue("auto",autologin)
        if autoloin==1
            login()
        end
    end
</script>

<!-- unit是此xml的根，代表了下面定义的是某个Widget的功能组 -->
<unit> 
    <div id="login" onload="autologin">
        <textfield id="name" label="手机号(账号)" name="id" value="" type="number" lign="right"/>
        <textfield id="psw" label="密码" value="" name="psw" type="password" lign="right"/>
        <checkbox id="remember" label="记住密码" value="false"/>
        <checkbox id="auto" label="自动登陆" value="false"/>
        <button id="go" label="登陆" onclick="login"/>
        <button id="fetchpsw" label="忘记密码" onclick="fetchpsw"/>
    </div>
</unit>
